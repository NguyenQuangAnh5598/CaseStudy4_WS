<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Fairy Tales</title>

    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        function createNewComment() {
            let comment = $('#comment').val();
            let newComment = {
                comment: comment,
                book: {id: 1},
                user: {id: 4}
            }

            $.ajax({
                headers:{
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type:"POST",
                url:  "http://localhost:8080/comments/create",
                data:JSON.stringify(newComment),
                success:successHandler,
            });
        }
        // successHandler();
        function successHandler(){

            $.ajax({
                type: "GET",
                url: "http://localhost:8080/comments/findBook/1",

                success : function (data){
            let content = ' <tr>\n' +
                '        <th>User Name :</th>\n' +
                '        <th>Comment :</th>\n' +
                '    </tr>'
                    for (let i = 0; i < data.length; i++) {
                        content += getComment(data[i])
                    }
                    document.getElementById("commentList").innerHTML = content;
                }
            })
        }
        function getComment (comment) {
            return `<tr><td >${comment.user.fullName}</td>
                        <td >${comment.comment}</td></tr>`
        };

        function  addComment(){
            let content = `<h5>Add comments</h5> <textarea id="comment" class="form-control"> </textarea>
        <div class="mt-3 d-flex justify-content-between align-items-center">
            <span id="count"></span> <button class="btn btn-sm btn-danger" onclick="createNewComment()">Submit</button> </div>`
            document.getElementById("addComment").innerHTML = content;
        }
    </script>
</head>

<body>
<div class="container">
    <div class="navbar">
        <div class="logo">
            <a href="index.html"><img src="images/logo.png" width="125px"></a>
        </div>
        <nav>
            <ul id="MenuItems">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html">Products</a></li>
                <li><a href="">About</a></li>
                <li><a href="">Contact</a></li>
                <li><a href="account.html">Account</a></li>
            </ul>
        </nav>
        <a href="cart.html"><img src="images/cart.png" width="30px" height="30px"></a>
        <img src="images/menu.png" class="menu-icon" onclick="menutoggle()">
    </div>
</div>
</div>

<!-- ---------- single Products detail ----------- -->

<div class="small-container single-product">
    <div class="row">
        <div class="col-2">
            <img src="book/co_tich/img1.jpg" width="100%" id="productImg">

        </div>
        <div class="col-2">
            <p>Home / Truyện Cổ Tích</p>
            <h1>Truyện cổ tích Ả Rập</h1>
            <h4>$50.00</h4>

            <input type="number" value="1">
            <a href="" class="btn">Thêm Vào Giỏ Sách</a>
            <h3>Chi Tiết Nội Dung Truyện
                <i class="fa fa-indent"></i>
            </h3>
            <br>
            <p>Tác phẩm này được sưu tập qua nhiều thế kỷ bởi nhiều tác giả,
                dịch giả và học giả khắp Tây Á, Trung Á, Nam Á và Bắc Phi.
                Bản thân các câu truyện được truy tìm nguồn gốc ngược về nền văn chương
                và truyện kể dân gian Ả Rập, Ba Tư, Lưỡng Hà, Ấn Độ, Do Thái và Ai Cập.
                Đặc biệt, nhiều truyện ban đầu là truyện dân gian từ thời đại Khalifah,
                trong khi đó một số truyện khác, đặc biệt là truyện nền,
                phần lớn có thể đã được lấy từ tác phẩm văn chương Ba Tư là Hazār Afsān (Một ngàn truyện)
                mà đến lượt chúng lại dựa một phần vào những yếu tố Ấn Độ.</p>
            </select>
        </div>
    </div>
</div>

<!-- ----- title------------- -->
<div class="small-container">
    <div class="row row2">
        <h2>
            <button type="submit" onclick="successHandler()">Bình Luận Của Độc Giả</button>
        </h2>

    </div>
</div>


<!-- ---------------COMMENT----------------- -->

<!-- Tạo ô comment-->
<!--<div class="form-floating"  id="mydiv">-->
<!--        <table >-->
<!--        <textarea class="form-control" placeholder="Leave a comment here" id="comment"-->
<!--                  style="height: 100px"></textarea>-->
<!--            <button type="submit" onclick="createNewComment()">An COMMENT DE </button>-->
<!--        </table>-->

</div>
<!---------form danh sach comment------->
<!--<h1>Danh sach comment</h1>-->
<table id="commentList" border="1px">

</table>
<div class="small-container">
    <div class="row row2">
        <h2>
            <button  onclick="addComment()">Bình Luận</button>
        </h2>

    </div>
</div>
<div class="container height-100 d-flex justify-content-center align-items-center">
    <div class="card p-3" id="addComment">
<!--        <h5>Add comments</h5> <textarea id="comment" class="form-control"> </textarea>-->
<!--        <div class="mt-3 d-flex justify-content-between align-items-center">-->
<!--            <span id="count"></span> <button class="btn btn-sm btn-danger" onclick="createNewComment()">Submit</button> </div>-->
    </div>
</div>
<div class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col-1">
                <h3>Download Our App</h3>
                <p>Download App for Android and ios mobile phone</p>
                <div class="app-logo">
                    <img src="images/play-store.png">
                    <img src="images/app-store.png">
                </div>
            </div>
            <div class="footer-col-2">
                <img src="images/logo-white.png">
                <p>Our Purpose Is To Sustainably Make the Pleasure and
                    Benefits of Sports Accessible to the Many</p>
            </div>
            <div class="footer-col-3">
                <h3>Useful Links</h3>
                <ul>
                    <li>Coupons</li>
                    <li>Blog Post</li>
                    <li>Return Policy</li>
                    <li>Join Affiliate</li>
                </ul>
            </div>
            <div class="footer-col-4">
                <h3>Follow us</h3>
                <ul>
                    <li>Facebook</li>
                    <li>Twitter</li>
                    <li>Instagram</li>
                    <li>Youtube</li>
                </ul>
            </div>
        </div>
        <hr>
        <p class="Copyright">Copyright 2020 - By QuocHuy</p>
    </div>
    <!-- ------------------- js for toggle menu-------------- -->
    <script>
        var MenuItems = document.getElementById("MenuItems");

        MenuItems.style.maxHeight = "0px";

        function menutoggle() {
            if (MenuItems.style.maxHeight == "0px") {
                MenuItems.style.maxHeight = "200px";
            } else {
                MenuItems.style.maxHeight = "0px";
            }
        }

    </script>

    <!-- ------------------- JS for  product gallery------------------------         -->
    <script>
        var ProductImg = document.getElementById("productImg");
        var SmallImg = document.getElementsByClassName("small-img");

        SmallImg[0].onclick = function () {
            ProductImg.src = SmallImg[0].src;
        }
        SmallImg[1].onclick = function () {
            ProductImg.src = SmallImg[1].src;
        }
        SmallImg[2].onclick = function () {
            ProductImg.src = SmallImg[2].src;
        }
        SmallImg[3].onclick = function () {
            ProductImg.src = SmallImg[3].src;
        }

    </script>
</div>
</body>

</html>